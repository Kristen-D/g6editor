<template>
<div class="el-panel-white">
  <div class="el-panel-white-heading">
    <h3 class="el-panel-white-title">类型分析</h3>
  </div>
  <div class="el-panel-white-body">
    <div class="echartbox1" id="linepie1"></div>
  </div>
</div>
</template>

<script>
import echarts from 'echarts'
export default {
  props: ['dateRange'],
  watch: {
    dateRange: function() {
      this.loadMapChart();
    }
  },
  methods: {
    loadMapChart() {
      let myChart = echarts.init(document.getElementById('linepie1'));　　
      let option = {

        color: ['#50e3c2', '#12cbf6', '#028bff', '#0065ba', '#9fe060', '#8f69c7'],
        title: {
          text: '106',
          textStyle: {
            fontSize: 24,
            fontWeight: '800'
          },
          subtext: '类型总数',
          x: '12%',
          y: '40%'
        },
        // 	tooltip: {
        // 		trigger: 'axis',
        // 		axisPointer: { // 坐标轴指示器，坐标轴触发有效
        // 			type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
        // 		}
        // 	},
        grid: {
          top: '17%',
          left: '30%',
          right: '5%',
          bottom: '20%',
          containLabel: true
        },

        legend: {
          // orient: 'vertical',
          x: 'left',
          left: '8%',
          itemGap: 20,
          itemWidth: 10,
          itemHeight: 10,
          data: [{
              name: 'OS检测',
              icon: 'circle'
            },
            {
              name: '数据库检测',
              icon: 'circle'
            },
            {
              name: 'DNS检测',
              icon: 'circle'
            },
            {
              name: '弱密码',
              icon: 'circle'
            },
            {
              name: 'Web服务器漏洞检测',
              icon: 'circle'
            },
            {
              name: '其他',
              icon: 'circle'
            }
          ]
        },
        xAxis: [{
          type: 'category',
          data: ['OS检测', '数据库检测', 'DNS检测', '弱密码', 'Web服务器漏洞检测', '其他'],
          axisLine: { //坐标轴轴线相关设置。就是数学上的x轴
            show: true,
            lineStyle: {
              type: 'solid',
              color: '#e2e4e7'
            },

          },
          axisLabel: { //坐标轴刻度标签的相关设置。
            textStyle: {
              color: '#999999',
              fontFamily: "微软雅黑",
              fontSize: 12
            },
            interval: 0,
            //	rotate: 45,
          },
          axisTick: {
            alignWithLabel: true
          }
        }],
        yAxis: [{
          type: 'value',
          min: 0,
          max: 35,
          splitNumber: 6,
          splitLine: { //坐标轴在 grid 区域中的分隔线
            show: true,
            lineStyle: {
              color: 'rgba(170,172,178,0.33)'
            }
          },
          axisLine: { //坐标轴轴线相关设置。就是数学上的y轴
            show: false,
            lineStyle: {
              color: '#e2e4e7'
            },
          },
          axisTick: {
            show: false
          },
          axisLabel: {
            textStyle: {
              color: '#999999',
              fontSize: 12,
            },
          },

        }],
        series: [{
            name: '直接访问',
            type: 'bar',
            barWidth: '20%',
            itemStyle: {
              normal: {
                color: function(params) {
                  // build a color map as your need.
                  let colorList = ['#50e3c2', '#12cbf6', '#028bff', '#0065ba', '#9fe060', '#8f69c7'];
                  return colorList[params.dataIndex]
                }

              }
            },
            data: [34, 25, 15, 15, 12, 7]
          },
          {
            name: '访问来源',
            type: 'pie',
            radius: ['40%', '60%'],
            center: ['15%', '50%'],
            avoidLabelOverlap: false,
            // 			markPoint:{
            // 				symbol:'circle',
            // 				symbolSize:80
            // 			},
            label: {
              normal: {
                show: false,
                position: 'center'
              },
              emphasis: {
                show: false,
                textStyle: {
                  fontSize: '30',
                  fontWeight: 'bold'
                }
              }
            },
            labelLine: {
              normal: {
                show: false
              }
            },
            itemStyle: {
              normal: {
                borderWidth: 4,
                borderColor: '#fff',
              },
              emphasis: {
                borderWidth: 0,
                shadowBlur: 10,
                shadowOffsetX: 0,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
              }
            },
            data: [{
                value: 34,
                name: 'OS检测'
              },
              {
                value: 25,
                name: '数据库检测'
              },
              {
                value: 15,
                name: 'DNS检测'
              },
              {
                value: 15,
                name: '弱密码'
              },
              {
                value: 12,
                name: 'Web服务器漏洞检测'
              },
              {
                value: 7,
                name: '其他'
              }
            ]
          }
        ]
      };
      myChart.setOption(option);
      window.onresize = myChart.resize;
    }
  },
  mounted: function() {
    // this.loadMapChart();
  }
}
</script>

<style lang="css">
</style>
