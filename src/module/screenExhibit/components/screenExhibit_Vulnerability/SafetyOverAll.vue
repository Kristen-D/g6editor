<template>
  <div class="el-panel-bigscreen">
    <div class="el-panel-bigscreen-heading">
      <h3 class="el-panel-bigscreen-title"><i class="el-icon-caret-right title-symbol"></i>安全概况</h3>
    </div>
    <div class="el-panel-bigscreen-body">
      <div class="echartsbox8" id="safetyoverall"></div>
    </div>
  </div>
</template>

<script>
import echarts from 'echarts'
import {mapState} from 'vuex'
export default {
  computed: {
    ...mapState({
      activeScreen: state => state.context.activeScreen
    })
  },
  watch: {
    activeScreen: function() {
      if(this.activeScreen===3) {
        this.loadMapChart();
      }
    }
  },
  methods: {
    loadMapChart() {
      let myChart = echarts.init(document.getElementById('safetyoverall'));
    	let option = {
    		color: ['#90e9ff', '#f36121', '#00e81b'],
    		title: [{
    			text: '23',
    			textAlign: 'center',
    			top: '15%',
    			right: '25%',
    			textStyle: {
    				color: '#dededf',
    				fontSize: 28,
    				fontWeight: 'bolder'
    			}
    		}, {
    			text: '38',
    			textAlign: 'center',
    			top: '40%',
    			right: '25%',
    			textStyle: {
    				color: '#dededf',
    				fontSize: 28,
    				fontWeight: 'bolder'
    			}
    		}, {
    			text: '14',
    			textAlign: 'center',
    			top: '65%',
    			right: '25%',
    			textStyle: {
    				color: '#dededf',
    				fontSize: 28,
    				fontWeight: 'bolder'
    			}
    		}, {
    			text: '新增漏洞/个',
    			textAlign: 'center',
    			top: '18%',
    			right: 0,
    			textStyle: {
    				color: '#c1c3c5',
    				fontSize: 14
    			}
    		}, {
    			text: '涉及单位/个',
    			textAlign: 'center',
    			top: '43%',
    			right: 0,
    			textStyle: {
    				color: '#c1c3c5',
    				fontSize: 14
    			}
    		}, {
    			text: '涉及资产/个',
    			textAlign: 'center',
    			top: '68%',
    			right: 0,
    			textStyle: {
    				color: '#c1c3c5',
    				fontSize: 14
    			}
    		}, ],
    		tooltip: {
    			trigger: 'item',
    			formatter: "{a} <br/>{b} : {c} ({d}%)"
    		},
    		series: [{
    			name: '安全概况',
    			type: 'pie',
    			radius: '55%',
    			center: ['30%', '50%'],
    			data: [{
    					value: 20,
    					name: '应用漏洞'
    				},
    				{
    					value: 40,
    					name: '弱口令'
    				},
    				{
    					value: 40,
    					name: '系统漏洞'
    				}
    			],
    			label: {
    				normal: {
    					textStyle: {
    						color: '#c1c3c5'
    					}
    				}
    			},
    			labelLine: {
    				normal: {
    					length: 10,
    					length2: 10,
    					lineStyle: {
    						color: '#c1c3c5'
    					}
    				}
    			},
    			itemStyle: {
    				emphasis: {
    					shadowBlur: 10,
    					shadowOffsetX: 0,
    					shadowColor: 'rgba(0, 0, 0, 0.5)'
    				}
    			}
    		}]
    	};
    	myChart.setOption(option);
      window.onresize = myChart.resize;
    }
  },
  mounted: function() {
    // this.loadMapChart();
  }
}
</script>

<style lang="css">
</style>
